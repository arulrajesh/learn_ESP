; === DEBUG BUILD ===
[env:debug]
platform = espressif32
board = lolin_s3_mini
framework = arduino
monitor_speed = 115200

build_flags = 
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -Og                   ; Debug optimization (some optimization but debugger-friendly)
    -DDEBUG               ; Enable debug code
    -g                    ; Include debug symbols
lib_deps = 
    adafruit/Adafruit NeoPixel@^1.11.0
    bblanchon/ArduinoJson@^7.0.0

upload_speed = 921600
monitor_port = COM24
upload_port = COM24

; === RELEASE BUILD ===
[env:release]
platform = espressif32
board = lolin_s3_mini
framework = arduino
monitor_speed = 115200
build_flags = 
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -O3                   ; Maximum speed optimization
    -DNDEBUG              ; Disable debug assertions
    -ffast-math
    -funroll-loops
    -fomit-frame-pointer
    ;-flto
lib_deps = 
    adafruit/Adafruit NeoPixel@^1.11.0
    bblanchon/ArduinoJson@^7.0.0

upload_speed = 921600
monitor_port = COM24
upload_port = COM24

; === SIZE-OPTIMIZED BUILD ===
[env:release_size]
platform = espressif32
board = lolin_s3_mini
framework = arduino
monitor_speed = 115200
lib_deps = 
    adafruit/Adafruit NeoPixel@^1.11.0
    bblanchon/ArduinoJson@^7.0.0
build_flags = 
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -Os                   ; Optimize for size
    -DNDEBUG
    -flto

upload_speed = 921600
monitor_port = COM24
upload_port = COM24